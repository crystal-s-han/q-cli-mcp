# Lab.2-2. Streamable-HTTP MCP Server 와 MCP Client/MCP Host 만들어 보기


## 개요
중앙 집중식 MCP 서버를 구축하여 여러 사용자나 애플리케이션에서 공유할 수 있는 환경을 구성합니다. 그렇다면 MCP 서버를 AWS 환경에 배포하여 운영하면 어떤 장점이 있을까요? MCP 서버를 사용하는 사용자의 관점과 MCP 서버를 운영하는 관점에서 살펴보겠습니다.


## MCP 서버 사용자 관점
- 편의성: AWS에서 MCP 서버를 운영하면 사용자는 복잡한 로컬 설치나 환경 설정 과정을 거칠 필요가 없습니다. 단순히 인터넷 연결만 있으면 데스크톱, 노트북, 태블릿 등 어떤 기기에서든 동일한 서비스에 접근할 수 있어 장소에 구애받지 않고 작업할 수 있습니다. 또한 서버 업데이트, 보안 패치, 백업 등의 기술적 관리 업무를 AWS가 자동으로 처리하기 때문에 사용자는 핵심 업무에만 집중할 수 있습니다.
- 보안: MCP 서버가 클라우드에서 실행되기 때문에 사용자의 개인 파일이나 시스템에 직접 접근할 수 없어 개인정보와 중요 데이터를 안전하게 보호할 수 있습니다. AWS의 엔터프라이즈급 보안 인프라와 전문적인 보안 관리 체계를 활용하여 개인이 직접 구축하기 어려운 수준의 보안을 제공받습니다. 만약 서비스에 문제가 발생하더라도 개인 시스템과 완전히 격리되어 있어 로컬 환경에는 전혀 영향을 주지 않습니다.
- 협업: 팀 전체가 동일한 AWS 기반 MCP 서버를 사용함으로써 일관된 작업 환경과 동일한 데이터 소스를 공유할 수 있어 협업 효율성이 크게 향상됩니다. 관리자가 중앙에서 모든 사용자의 권한과 설정을 통합 관리할 수 있으며, 새로운 기능이나 업데이트를 모든 팀원에게 동시에 배포하여 버전 불일치나 설정 차이로 인한 문제를 방지할 수 있습니다.


## MCP 서버 운영자 관점
- IAM 기반 세밀한 권한 제어: AWS IAM을 활용하면 MCP 서버에 필요한 최소한의 권한만을 정확히 부여할 수 있습니다. 서비스별, 리소스별로 세분화된 권한 설정이 가능하여 S3 특정 버킷에만 읽기 권한을 주거나 특정 DynamoDB 테이블에만 쓰기 권한을 부여하는 등 정밀한 접근 제어가 가능합니다.
- 네트워크 보안 강화: AWS VPC(Virtual Private Cloud)를 통해 MCP 서버를 완전히 격리된 네트워크 환경에서 운영할 수 있어 외부 위협으로부터 보호할 수 있습니다. Security Group과 Network ACL을 활용하여 필요한 트래픽만 허용하고 불필요한 접근을 차단할 수 있으며, 포트 단위까지 세밀한 네트워크 접근 제어가 가능합니다.


## 원격 MCP 서버를 구성할 때 주요 개념
MCP(Model Context Protocol)는 원격 통신을 위해 다양한 Transport 방식을 지원합니다. MCP 사양(2025-03-26)에 따르면 다음과 같은 Transport 방식이 있습니다.

**stdio**
- 실행 방식: 표준 입출력(stdin/stdout)을 통한 통신
- 사용 환경: 로컬 환경에서 주로 사용
- 특징: 클라이언트가 서버 프로세스를 직접 시작하고 관리
- 장점: 설정이 간단하고 추가 네트워크 구성이 필요 없음
- 사용 사례: 로컬 개발 환경, 단일 사용자 시나리오

**streamable HTTP**
- 실행 방식: HTTP POST와 GET을 통한 양방향 통신
- 특징:
  - 단일 엔드포인트에서 POST와 GET을 모두 지원
- Server-Sent Events (SSE)를 통한 스트리밍 지원
- 세션 관리 기능 제공
- 장점:
  - 확장성 있는 서버-클라이언트 통신
  - 세션 기반 상태 관리
  - 연결 재개 및 메시지 재전송 지원
  - 사용 사례: 클라우드 환경, 다중 사용자 시나리오

**HTTP/SSE(2024-11-05)**
- 실행 방식: HTTP를 통한 단방향 이벤트 스트림
- 엔드포인트: /sse
- 특징: 서버에서 클라이언트로의 지속적인 데이터 스트림 제공
- 장점: 표준 HTTP를 사용하여 방화벽 통과가 용이함
- 사용 사례: 중앙 집중식 서버, 여러 사용자가 공유하는 환경
- 호환성: 2025-03-26 버전과의 하위 호환성 유지

